jQuery(document).ready(function(a){sce=a.simplecommentediting=a.fn.simplecommentediting=function(){return this.each(function(){var d=a(this).find("a:first").attr("href"),c=wpAjax.unserialize(d),b=this;a(b).on("click","a",function(e){e.preventDefault();a("#sce-edit-comment-status"+c.cid).removeClass().addClass("sce-status").css("display","none");a(b).fadeOut("fast",function(){a(b).siblings(".sce-textarea").find("button").prop("disabled",!1);a(b).siblings(".sce-textarea").fadeIn("fast",function(){a(b).siblings(".sce-textarea").find("textarea:first").focus()})})});
a(b).siblings(".sce-textarea").on("click",".sce-comment-cancel",function(e){e.preventDefault();a(b).siblings(".sce-textarea").fadeOut("fast",function(){a(b).fadeIn("fast");a("#sce-edit-comment"+c.cid+" textarea").val(sce.textareas[c.cid])})});a(b).siblings(".sce-textarea").on("click",".sce-comment-save",function(e){e.preventDefault();a(b).siblings(".sce-textarea").find("button").prop("disabled",!0);a(b).siblings(".sce-textarea").fadeOut("fast",function(){a(b).siblings(".sce-loading").fadeIn("fast");
var e=a(b).siblings(".sce-textarea").find("textarea").val(),f=a.trim(e);"I am God"==e&&"object"==typeof console&&console.log("Isn't God perfect?  Why the need to edit?");""==f&&1==simple_comment_editing.allow_delete?confirm(simple_comment_editing.confirm_delete)?(a(b).siblings(".sce-textarea").off(),a(b).off(),a(b).parent().remove(),a.post(d,{action:"sce_delete_comment",comment_id:c.cid,post_id:c.pid,nonce:c._wpnonce},function(b){a("#sce-edit-comment-status"+c.cid).removeClass().addClass("sce-status updated").html(simple_comment_editing.comment_deleted).show();
setTimeout(function(){a("#comment-"+c.cid).slideUp()},5E3)},"json")):(a("#sce-edit-comment"+c.cid+" textarea").val(sce.textareas[c.cid]),a(b).siblings(".sce-loading").fadeOut("fast",function(){a(b).fadeIn("fast")})):(jQuery("body").triggerHandler("sce.comment.save.pre",[c.cid,c.pid]),e={action:"sce_save_comment",comment_content:f,comment_id:c.cid,post_id:c.pid,nonce:c._wpnonce},e=wp.hooks.applyFilters("sce.comment.save.data",e),a.post(d,e,function(e){a(b).siblings(".sce-loading").fadeOut("fast",function(){a(b).fadeIn("fast",
function(){e.errors?(1==e.remove&&(a(b).siblings(".sce-textarea").off(),a(b).off(),a(b).parent().remove()),a("#sce-edit-comment-status"+c.cid).removeClass().addClass("sce-status error").html(e.error).show()):(a("#sce-comment"+c.cid).html(e.comment_text),sce.textareas[c.cid]=a("#sce-edit-comment"+c.cid+" textarea").val(),jQuery("body").triggerHandler("sce.comment.save",[c.cid,c.pid]))})})},"json"))})});a.post(d,{action:"sce_get_time_left",comment_id:c.cid,post_id:c.pid,_ajax_nonce:simple_comment_editing.nonce},
function(c){var d=parseInt(c.minutes),f=parseInt(c.seconds),h=sce.get_timer_text(d,f);c.can_edit?(a(b).find(".sce-timer").html(h),a(b).show(400,function(){a(b).trigger("sce.timer.loaded",b)}),sce.textareas[c.comment_id]=a("#sce-edit-comment"+c.comment_id+" textarea").val(),sce.timers[c.comment_id]={minutes:d,seconds:f,start:(new Date).getTime(),time:0,timer:function(){timer_seconds=sce.timers[c.comment_id].seconds-1;timer_minutes=sce.timers[c.comment_id].minutes;if(0>=timer_minutes&&0>=timer_seconds)a(b).siblings(".sce-textarea").off(),
a(b).off(),a(b).parent().remove();else{0>timer_seconds&&(--timer_minutes,timer_seconds=59);a(b).find(".sce-timer").html(sce.get_timer_text(timer_minutes,timer_seconds));sce.timers[c.comment_id].seconds=timer_seconds;sce.timers[c.comment_id].minutes=timer_minutes;var d=sce.timers[c.comment_id];d.time+=1E3;var g=(new Date).getTime()-d.start-d.time;window.setTimeout(d.timer,1E3-g)}}},window.setTimeout(sce.timers[c.comment_id].timer,1E3)):(a(b).siblings(".sce-textarea").off(),a(b).off(),a(b).parent().remove())},
"json")})};sce.get_timer_text=function(a,c){0>c&&(--a,c=59);var b;b="&nbsp;&ndash;&nbsp;"+simple_comment_editing.timer_format;1<=a?(b=b.replace("{colon}",":"),b=b.replace("{minutes_time}",a),b=b.replace("{minutes_text}",simple_comment_editing.timer.minutes[a]),0<=c&&(b=b.replace("{sce_and}"," "+simple_comment_editing.and+" "))):(b=b.replace("{colon}",""),b=b.replace("{minutes_time}",""),b=b.replace("{minutes_text}",""),0<=c&&(b=b.replace("{sce_and}","")));0<=c&&(seconds_text=10>c?"0"+c:c,b=b.replace("{seconds_time}",
seconds_text),b=b.replace("{seconds_text}",simple_comment_editing.timer.seconds[c]));return b};sce.set_comment_cookie=function(d,c,b){a.post(simple_comment_editing.ajax_url,{action:"sce_get_cookie_var",post_id:d,comment_id:c,_ajax_nonce:simple_comment_editing.nonce},function(a){var d=new Date(a.expires),d=d.toGMTString();document.cookie=a.name+"="+a.value+"; expires="+d+"; path="+a.path;"function"==typeof b&&b(c)},"json")};sce.timers=[];sce.textareas=[];a(".sce-edit-button").simplecommentediting();
a(".sce-edit-button").on("sce.timer.loaded",SCE_comment_scroll);a("body").on("comment.posted",function(d,c,b){sce.set_comment_cookie(c,b,function(b){a.post(simple_comment_editing.ajax_url,{action:"sce_get_comment",comment_id:b,_ajax_nonce:simple_comment_editing.nonce},function(b){a("body").trigger("sce.comment.loaded",[b])},"json")})});a("body").on("epoch.comment.posted",function(d,c,b){sce.set_comment_cookie(c,b,function(b){a.post(simple_comment_editing.ajax_url,{action:"sce_epoch_get_comment",comment_id:b,
_ajax_nonce:simple_comment_editing.nonce},function(c){comment=Epoch.parse_comment(c);a("#comment-"+b).replaceWith(comment);a("#comment-"+b).find(".sce-edit-button").simplecommentediting()},"json")})});a("body").on("epoch.comments.loaded",function(d){a(".sce-edit-button").simplecommentediting()})});function SCE_comment_scroll(a,d){var c=""+window.location;/(#[^-]*\-[^&]*)/.test(c)&&(c=jQuery(""+window.location.hash),0<c.length&&(c=c.offset().top,jQuery("html,body").animate({scrollTop:c},1E3)))}
function SCE_comments_updated(a){if(a=a.match(/#comment-(\d+)/))comment_id=a[1],jQuery("#comment-"+comment_id).find(".sce-edit-button").simplecommentediting()};